# Codebase Structure

**Analysis Date:** 2026-01-19

## Directory Layout

```
Tuner/
├── .github/           # CI/CD workflows
│   └── workflows/     # GitHub Actions
├── .planning/         # Project planning documents
│   └── codebase/      # This codebase analysis
├── music-sources/     # Git submodule (empty)
├── node_modules/      # Frontend dependencies
├── public/            # Static assets
├── server/            # Backend Express server
├── src/               # Frontend React source
├── Dockerfile         # Container build
├── index.html         # SPA entry HTML
├── package.json       # Frontend manifest
└── vite.config.ts     # Vite configuration
```

## Directory Purposes

**src/**
- Purpose: React frontend application
- Contains: TypeScript components, CSS styles
- Key files:
  - `App.tsx` - Main application component (all UI logic)
  - `main.tsx` - React entry point
  - `App.css` - Component styles
  - `index.css` - Global styles
  - `assets/react.svg` - React logo asset
- Subdirectories: `assets/` (static assets bundled by Vite)

**server/**
- Purpose: Express backend for stream proxying
- Contains: JavaScript server files, separate package.json
- Key files:
  - `index.js` - Development server
  - `production.js` - Production server (serves static + API)
  - `package.json` - Server dependencies (express, cors)
- Subdirectories: None

**public/**
- Purpose: Static files served directly (not bundled)
- Contains: `vite.svg` - Favicon
- Key files: None significant
- Subdirectories: None

**.github/workflows/**
- Purpose: CI/CD automation
- Contains: GitHub Actions workflow files
- Key files: `deploy.yml` - Build and deploy to EC2

## Key File Locations

**Entry Points:**
- `src/main.tsx` - React application entry
- `server/index.js` - Backend dev server entry
- `server/production.js` - Backend production entry
- `index.html` - HTML shell for SPA

**Configuration:**
- `package.json` - Frontend dependencies and scripts
- `server/package.json` - Server dependencies and scripts
- `vite.config.ts` - Vite build configuration with API proxy
- `tsconfig.json` - TypeScript project references
- `tsconfig.app.json` - Frontend TypeScript options
- `tsconfig.node.json` - Node tooling TypeScript options
- `eslint.config.js` - ESLint configuration

**Core Logic:**
- `src/App.tsx` - All frontend UI and logic (400 lines)
- `server/index.js` - Stream proxy implementation
- `server/production.js` - Production server with static serving

**Testing:**
- Not detected (no test files or test configuration)

**Documentation:**
- `README.md` - Vite + React template readme (generic)

**Infrastructure:**
- `Dockerfile` - Multi-stage Docker build
- `.github/workflows/deploy.yml` - EC2 deployment workflow
- `.dockerignore` - Docker build exclusions
- `.gitignore` - Git exclusions

## Naming Conventions

**Files:**
- PascalCase for React components (`App.tsx`)
- camelCase for entry files (`main.tsx`, `index.js`)
- kebab-case for config files (`vite.config.ts`)
- lowercase for CSS (`App.css`, `index.css`)

**Directories:**
- lowercase for all directories (`src`, `server`, `public`)
- Plural not enforced (single-directory structure)

**Special Patterns:**
- No index.ts barrel files
- Single-component architecture (no component directory)

## Where to Add New Code

**New React Component:**
- Implementation: `src/components/{ComponentName}.tsx` (create directory)
- Styles: `src/components/{ComponentName}.css` or colocate
- Import into: `src/App.tsx`

**New API Endpoint:**
- Implementation: `server/index.js` (add route)
- Production: `server/production.js` (add matching route)
- Frontend call: `src/App.tsx` (add fetch)

**New Static Asset:**
- Bundled: `src/assets/{filename}`
- Direct serve: `public/{filename}`

**New Configuration:**
- Vite: `vite.config.ts`
- TypeScript: `tsconfig.app.json`
- ESLint: `eslint.config.js`

## Special Directories

**node_modules/**
- Purpose: npm dependencies
- Source: Auto-generated by `npm install`
- Committed: No (in `.gitignore`)

**dist/**
- Purpose: Production build output
- Source: Generated by `npm run build`
- Committed: No (in `.gitignore`)

**music-sources/**
- Purpose: Unknown (git submodule, appears unused)
- Source: External git repository
- Committed: Yes (submodule reference)

---

*Structure analysis: 2026-01-19*
*Update when directory structure changes*
