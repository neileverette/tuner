---
phase: 01-genre-taxonomy
plan: 01
type: execute
domain: typescript-config
---

<objective>
Create the genre registry and taxonomy system as the foundational data layer for multi-source radio aggregation.

Purpose: Establish type-safe genre definitions that all subsequent phases depend on - source mappings, API responses, and UI filtering will all reference this taxonomy.

Output:
- `src/config/genres.ts` - Genre taxonomy definitions with 8 parent categories
- `src/config/types.ts` - Shared TypeScript interfaces for channel-genre mappings
- `src/config/sources/somafm.ts` - SomaFM channel-to-genre mappings (49 channels)
- `src/config/sources/radio-paradise.ts` - Radio Paradise channel-to-genre mappings (4 channels)
- `src/config/sources/index.ts` - Source registry exports
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-genre-taxonomy/01-RESEARCH.md

**Tech stack (from package.json):**
- TypeScript ~5.9.3 (supports `as const satisfies` pattern)
- React 19, Vite
- No existing `src/config/` directory

**From research:**
- 8 parent categories: ambient, electronic, rock, world, jazz-soul, lounge, eclectic, holiday
- 49 SomaFM channels mapped to normalized genres
- 4 Radio Paradise channels mapped
- Use `as const satisfies` pattern for type-safe registry

**Constraining decisions:**
- Static config files (no database) - per PROJECT.md architecture decision
- Genre IDs must be lowercase, URL-safe identifiers
- Channels can have primary + secondary genres (multi-tag support)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create directory structure and types</name>
  <files>src/config/types.ts, src/config/genres.ts</files>
  <action>
Create `src/config/` directory structure. Then create:

**src/config/types.ts:**
- `GenreDefinition` interface: id (string), name (string), description (string), order (number), icon (optional string)
- `ChannelGenreMapping` interface: channelId (string), primaryGenre (GenreId), secondaryGenres (optional readonly GenreId[])
- `SourceConfig` interface: id (string), name (string), homepage (string), channels (readonly ChannelGenreMapping[])

**src/config/genres.ts:**
- Export `GENRES` object with 8 categories using `as const satisfies Record<string, GenreDefinition>` pattern
- Categories in order: ambient (1), electronic (2), rock (3), world (4), jazz-soul (5), lounge (6), eclectic (7), holiday (8)
- Derive `GenreId` type from GENRES keys
- Export `GENRE_LIST` (sorted by order), `GENRE_IDS`, `getGenre(id)` helper, `isValidGenreId(id)` type guard

Use the exact definitions from research code examples. Do NOT create custom validation beyond TypeScript types - let the compiler do the work.
  </action>
  <verify>
Run `npx tsc --noEmit` - should pass with no errors.
Import GenreId in a test: `import type { GenreId } from './src/config/genres'` should work.
  </verify>
  <done>
- src/config/types.ts exists with ChannelGenreMapping, SourceConfig interfaces
- src/config/genres.ts exists with GENRES const, GenreId type, GENRE_LIST, GENRE_IDS exports
- TypeScript compiles without errors
- GenreId type resolves to union of 8 literal strings
  </done>
</task>

<task type="auto">
  <name>Task 2: Create SomaFM channel mappings</name>
  <files>src/config/sources/somafm.ts</files>
  <action>
Create `src/config/sources/somafm.ts` with SOMAFM_CONFIG implementing SourceConfig interface.

Map all 49 SomaFM channels to normalized genres using the mappings from research:

**Ambient (9 channels):** groovesalad, gsclassic, dronezone, deepspaceone, darkzone, synphaera, missioncontrol, doomed, chillits

**Electronic (9 channels):** beatblender, cliqhop, dubstep, fluid, lush, spacestation, thetrip, vaporwaves, defcon

**Rock (7 channels):** indiepop, poptron, digitalis, u80s, folkfwd, metal, seventies

**World (5 channels):** suburbsofgoa, thistle, tikitime (secondary: lounge), bossa, reggae

**Jazz-Soul (3 channels):** sonicuniverse, 7soul, insound

**Lounge (2 channels):** illstreet, secretagent

**Eclectic (6 channels):** brfm, covers, bootliquor, live, scanner, specials, sfinsf

**Holiday (5 channels):** christmas, jollysoul, xmasinfrisko, xmasrocks, deptstore

Additional (1 channel): sf1033 -> ambient, n5md -> electronic

Include secondary genres where channels bridge categories (per research mappings):
- groovesalad, gsclassic, synphaera, missioncontrol: primary ambient, secondary electronic
- indiepop, digitalis, u80s: primary rock, secondary electronic
- tikitime: primary world, secondary lounge

Do NOT hand-roll channel ID validation - TypeScript will catch typos at compile time.
  </action>
  <verify>
Run `npx tsc --noEmit` - all 49 channel mappings type-check against GenreId.
Count channels: `SOMAFM_CONFIG.channels.length` should equal 49.
  </verify>
  <done>
- src/config/sources/somafm.ts exists
- SOMAFM_CONFIG exports with id: 'somafm', name: 'SomaFM'
- 49 channel mappings present, each with valid primaryGenre (GenreId type)
- Secondary genres present where applicable
- TypeScript compiles without errors
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Radio Paradise mappings and source index</name>
  <files>src/config/sources/radio-paradise.ts, src/config/sources/index.ts</files>
  <action>
**src/config/sources/radio-paradise.ts:**
Create RADIO_PARADISE_CONFIG implementing SourceConfig with 4 channels:
- rp-main: primary eclectic, secondary [rock, electronic, world]
- rp-mellow: primary ambient
- rp-rock: primary rock
- rp-global: primary world

**src/config/sources/index.ts:**
- Import SOMAFM_CONFIG and RADIO_PARADISE_CONFIG
- Export both individually
- Export `SOURCES` array containing all source configs
- Export `getSource(id: string)` helper function
- Export `getAllChannelMappings()` that returns flat array of all channel mappings with source ID attached

Do NOT add validation logic - rely on TypeScript types.
  </action>
  <verify>
Run `npx tsc --noEmit` - no errors.
Import test: `import { SOURCES, getAllChannelMappings } from './src/config/sources'` works.
Total channels: `getAllChannelMappings().length` should equal 53 (49 SomaFM + 4 Radio Paradise).
  </verify>
  <done>
- src/config/sources/radio-paradise.ts exists with 4 channel mappings
- src/config/sources/index.ts exports SOURCES, getSource, getAllChannelMappings
- All exports type-safe, TypeScript compiles without errors
- Combined channel count is 53
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx tsc --noEmit` passes with no errors
- [ ] All 5 config files exist: types.ts, genres.ts, somafm.ts, radio-paradise.ts, sources/index.ts
- [ ] GenreId type is union of exactly 8 literal strings
- [ ] SOMAFM_CONFIG.channels.length === 49
- [ ] RADIO_PARADISE_CONFIG.channels.length === 4
- [ ] SOURCES array contains both source configs
- [ ] `npm run build` succeeds (Vite build works)
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors or warnings
- Genre taxonomy matches research specification (8 categories)
- All channel mappings use type-safe GenreId (no string literals)
- Config files follow `as const satisfies` pattern
- Phase 1 complete - ready for Phase 2 (Source Registry System)
</success_criteria>

<output>
After completion, create `.planning/phases/01-genre-taxonomy/01-01-SUMMARY.md` with:

---
phase: 01-genre-taxonomy
plan: 01
subsystem: config
requires: []
provides: [genre-registry, channel-mappings]
affects: [02-source-registry, 04-backend-api, 06-genre-panel]
tags: [typescript, static-config, data-layer]
tech-stack:
  added: []
  patterns: [as-const-satisfies, derived-types]
key-decisions: []
key-files: [src/config/genres.ts, src/config/sources/index.ts]
---

# Phase 1 Plan 1: Genre Registry & Taxonomy Summary

**[One-liner describing what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `src/config/genres.ts` - Genre taxonomy (8 categories)
- `src/config/types.ts` - TypeScript interfaces
- `src/config/sources/somafm.ts` - SomaFM mappings (49 channels)
- `src/config/sources/radio-paradise.ts` - Radio Paradise mappings (4 channels)
- `src/config/sources/index.ts` - Source registry exports

## Decisions Made

[Any decisions during implementation]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

Phase 1 complete. Phase 2 (Source Registry System) can proceed - genre taxonomy provides the type system it needs.
</output>
